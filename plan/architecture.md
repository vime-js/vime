# Architecture

## Player

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllciB7XG4gICAgK2lkZW50aWZlcjogc3ltYm9sXG4gICAgK3NyYzogU291cmNlW11cbiAgICArcGF1c2VkOiBib29sZWFuXG4gICAgK3ZvbHVtZTogbnVtYmVyXG4gICAgLi4uXG4gICAgK2F1dG9Bc3BlY3RSYXRpbzogYm9vbGVhblxuICAgICthdXRvRmV0Y2hQb3N0ZXI6IGJvb2xlYW5cbiAgICAraGVhcnRiZWF0SW50ZXJ2YWw6IG51bWJlclxuICAgICtjdXJyZW50UHJvdmlkZXI_OiBNZWRpYVByb3ZpZGVyfmFueX5cbiAgICAjcGxheWVyU3RvcmU6IFBsYXllclN0b3JlXG5cbiAgICAjaGFuZGxlTWVkaWFDaGFuZ2UoKSB2b2lkXG4gICAgI2hhbmRsZVByb3ZpZGVyQ2hhbmdlKCkgdm9pZFxuICAgICtwbGF5KCkgUHJvbWlzZX52b2lkfiBcbiAgICArcGF1c2UoKSBQcm9taXNlfnZvaWR-IFxuICAgICtnZXRDYXB0dXJlU3RyZWFtKCkgTWVkaWFTdHJlYW18dW5kZWZpbmVkXG4gICAgK2dldEN1cnJlbnRQbGF5ZXJTdGF0ZSgpIFBsYXllclN0YXRlXG59XG5cblBsYXllciAtLSBWaWV3VHlwZVxuUGxheWVyIC0tIE1lZGlhVHlwZVxuUGxheWVyIFwiMVwiIC0tKiBcIjAuLipcIiBNZWRpYVByb3ZpZGVyOiBjb21wb3NpdGlvblxuXG5jbGFzcyBQbGF5ZXJDb250ZXh0XG5QbGF5ZXIgLS0-IFBsYXllckNvbnRleHQ6IGhhc1xuXG5jbGFzcyBQbGF5ZXJTdGF0ZSB7XG4gICAgPDxpbnRlcmZhY2U-PlxuICAgIHNyYzogU291cmNlW11cbiAgICBjdXJyZW50VGltZTogbnVtYmVyXG4gICAgdm9sdW1lOiBudW1iZXJcbiAgICB0cmltPzogTWVkaWFUcmltXG4gICAgaW5WaWV3cG9ydDogYm9vbGVhblxuICAgIC4uLlxufVxuXG5QbGF5ZXIgLS0-IFBsYXllclN0YXRlOiBpbXBsZW1lbnRzXG5QbGF5ZXJDb250ZXh0IC0tPiBQbGF5ZXJTdGF0ZTogaW1wbGVtZW50c1xuXG5jbGFzcyBNZWRpYVRyaW0ge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICBzdGFydFRpbWU6IG51bWJlclxuICAgIGVuZFRpbWU6IG51bWJlclxuICAgIGR1cmF0aW9uOiBudW1iZXJcbn1cblxuUGxheWVyU3RhdGUgLS0gTWVkaWFUcmltIiwibWVybWFpZCI6e30sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllciB7XG4gICAgK2lkZW50aWZlcjogc3ltYm9sXG4gICAgK3NyYzogU291cmNlW11cbiAgICArcGF1c2VkOiBib29sZWFuXG4gICAgK3ZvbHVtZTogbnVtYmVyXG4gICAgLi4uXG4gICAgK2F1dG9Bc3BlY3RSYXRpbzogYm9vbGVhblxuICAgICthdXRvRmV0Y2hQb3N0ZXI6IGJvb2xlYW5cbiAgICAraGVhcnRiZWF0SW50ZXJ2YWw6IG51bWJlclxuICAgICtjdXJyZW50UHJvdmlkZXI_OiBNZWRpYVByb3ZpZGVyfmFueX5cbiAgICAjcGxheWVyU3RvcmU6IFBsYXllclN0b3JlXG5cbiAgICAjaGFuZGxlTWVkaWFDaGFuZ2UoKSB2b2lkXG4gICAgI2hhbmRsZVByb3ZpZGVyQ2hhbmdlKCkgdm9pZFxuICAgICtwbGF5KCkgUHJvbWlzZX52b2lkfiBcbiAgICArcGF1c2UoKSBQcm9taXNlfnZvaWR-IFxuICAgICtnZXRDYXB0dXJlU3RyZWFtKCkgTWVkaWFTdHJlYW18dW5kZWZpbmVkXG4gICAgK2dldEN1cnJlbnRQbGF5ZXJTdGF0ZSgpIFBsYXllclN0YXRlXG59XG5cblBsYXllciAtLSBWaWV3VHlwZVxuUGxheWVyIC0tIE1lZGlhVHlwZVxuUGxheWVyIFwiMVwiIC0tKiBcIjAuLipcIiBNZWRpYVByb3ZpZGVyOiBjb21wb3NpdGlvblxuXG5jbGFzcyBQbGF5ZXJDb250ZXh0XG5QbGF5ZXIgLS0-IFBsYXllckNvbnRleHQ6IGhhc1xuXG5jbGFzcyBQbGF5ZXJTdGF0ZSB7XG4gICAgPDxpbnRlcmZhY2U-PlxuICAgIHNyYzogU291cmNlW11cbiAgICBjdXJyZW50VGltZTogbnVtYmVyXG4gICAgdm9sdW1lOiBudW1iZXJcbiAgICB0cmltPzogTWVkaWFUcmltXG4gICAgaW5WaWV3cG9ydDogYm9vbGVhblxuICAgIC4uLlxufVxuXG5QbGF5ZXIgLS0-IFBsYXllclN0YXRlOiBpbXBsZW1lbnRzXG5QbGF5ZXJDb250ZXh0IC0tPiBQbGF5ZXJTdGF0ZTogaW1wbGVtZW50c1xuXG5jbGFzcyBNZWRpYVRyaW0ge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICBzdGFydFRpbWU6IG51bWJlclxuICAgIGVuZFRpbWU6IG51bWJlclxuICAgIGR1cmF0aW9uOiBudW1iZXJcbn1cblxuUGxheWVyU3RhdGUgLS0gTWVkaWFUcmltIiwibWVybWFpZCI6e30sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)

## Update Flow

The following uses setting the `paused` property to `false` as an example to show how update flows
differ between Provider, UI and Consumer (direct reference to `player` element).

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYWx0IFByb3ZpZGVyIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYigwLCAyNTUsIDAsIC4xKVxuICAgICAgICBQcm92aWRlciAtLT4-IFBsYXllcjogUHJvdmlkZXJQbGF5IEV2ZW50XG4gICAgICAgIFBsYXllciAtPj4gUGxheWVyQ29udGV4dDogVXBkYXRlXG4gICAgICAgIFBsYXllckNvbnRleHQgLS0-PiBVSTogQ29udGV4dFVwZGF0ZVxuICAgICAgICBlbmRcbiAgICBlbHNlIFVJIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYmEoMCwgMCwgMjU1LCAuMSlcbiAgICAgICAgVUkgLS0-PiBQbGF5ZXI6IFVJUGxheSBFdmVudFxuICAgICAgICBQbGF5ZXIgLT4-IFByb3ZpZGVyOiBzZXRQYXVzZWQoZmFsc2UpXG4gICAgICAgIFByb3ZpZGVyIC0tPj4gUGxheWVyOiBQcm92aWRlclBsYXkgRXZlbnRcbiAgICAgICAgUGxheWVyIC0-PiBQbGF5ZXJDb250ZXh0OiBVcGRhdGVcbiAgICAgICAgUGxheWVyQ29udGV4dCAtLT4-IFVJOiBDb250ZXh0VXBkYXRlXG4gICAgICAgIGVuZFxuICAgIGVsc2UgQ29uc3VtZXIgVXBkYXRlXG4gICAgICAgIHJlY3QgcmdiYSgyNTUsIDAsIDAsIC4xKVxuICAgICAgICBDb25zdW1lciAtPj4gUGxheWVyOiBwbGF5ZXIucGF1c2VkID0gZmFsc2VcbiAgICAgICAgUGxheWVyIC0-PiBQbGF5ZXI6IHBhdXNlZCBzZXR0ZXIgdHJpZ2dlcmVkXG4gICAgICAgIFBsYXllciAtPj4gUHJvdmlkZXI6IHNldFBhdXNlZChmYWxzZSlcbiAgICAgICAgUHJvdmlkZXIgLS0-PiBQbGF5ZXI6IFByb3ZpZGVyUGxheSBFdmVudFxuICAgICAgICBQbGF5ZXIgLT4-IFBsYXllckNvbnRleHQ6IFVwZGF0ZVxuICAgICAgICBQbGF5ZXJDb250ZXh0IC0tPj4gVUk6IENvbnRleHRVcGRhdGVcbiAgICAgICAgZW5kXG4gICAgZW5kIiwibWVybWFpZCI6e30sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYWx0IFByb3ZpZGVyIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYigwLCAyNTUsIDAsIC4xKVxuICAgICAgICBQcm92aWRlciAtLT4-IFBsYXllcjogUHJvdmlkZXJQbGF5IEV2ZW50XG4gICAgICAgIFBsYXllciAtPj4gUGxheWVyQ29udGV4dDogVXBkYXRlXG4gICAgICAgIFBsYXllckNvbnRleHQgLS0-PiBVSTogQ29udGV4dFVwZGF0ZVxuICAgICAgICBlbmRcbiAgICBlbHNlIFVJIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYmEoMCwgMCwgMjU1LCAuMSlcbiAgICAgICAgVUkgLS0-PiBQbGF5ZXI6IFVJUGxheSBFdmVudFxuICAgICAgICBQbGF5ZXIgLT4-IFByb3ZpZGVyOiBzZXRQYXVzZWQoZmFsc2UpXG4gICAgICAgIFByb3ZpZGVyIC0tPj4gUGxheWVyOiBQcm92aWRlclBsYXkgRXZlbnRcbiAgICAgICAgUGxheWVyIC0-PiBQbGF5ZXJDb250ZXh0OiBVcGRhdGVcbiAgICAgICAgUGxheWVyQ29udGV4dCAtLT4-IFVJOiBDb250ZXh0VXBkYXRlXG4gICAgICAgIGVuZFxuICAgIGVsc2UgQ29uc3VtZXIgVXBkYXRlXG4gICAgICAgIHJlY3QgcmdiYSgyNTUsIDAsIDAsIC4xKVxuICAgICAgICBDb25zdW1lciAtPj4gUGxheWVyOiBwbGF5ZXIucGF1c2VkID0gZmFsc2VcbiAgICAgICAgUGxheWVyIC0-PiBQbGF5ZXI6IHBhdXNlZCBzZXR0ZXIgdHJpZ2dlcmVkXG4gICAgICAgIFBsYXllciAtPj4gUHJvdmlkZXI6IHNldFBhdXNlZChmYWxzZSlcbiAgICAgICAgUHJvdmlkZXIgLS0-PiBQbGF5ZXI6IFByb3ZpZGVyUGxheSBFdmVudFxuICAgICAgICBQbGF5ZXIgLT4-IFBsYXllckNvbnRleHQ6IFVwZGF0ZVxuICAgICAgICBQbGF5ZXJDb250ZXh0IC0tPj4gVUk6IENvbnRleHRVcGRhdGVcbiAgICAgICAgZW5kXG4gICAgZW5kIiwibWVybWFpZCI6e30sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)

## Providers

The player will manage as much functionality as possible to avoid colliding with providers and for
consistency across them. This includes features like `autoplay`, `loop` and even `render()`. By enabling
the player to control when a provider is rendered we can open new features such as:

- Multiple providers can be passed in at the same time and cached. Providers can also potentially
  be loaded and prepared in the background.
- [Boot strategies](#boot-strategy) become possible which determine how/when a provider is loaded.
  Whether it is lazily loaded, when the poster is clicked, immediately or based on some custom logic.
- The player can select which source/s and provider to render based on a [media load strategy](#media-load-strategy).

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFlvdVR1YmVcbmNsYXNzIFZpbWVvXG5jbGFzcyBEYWlseW1vdGlvblxuY2xhc3MgRW1iZWRcblxuWW91VHViZSAtLSBFbWJlZDogdXNlc1xuVmltZW8gLS0gRW1iZWQ6IHVzZXNcbkRhaWx5bW90aW9uIC0tIEVtYmVkOiB1c2VzXG5cbmNsYXNzIEVtYmVkZWRNZWRpYVByb3ZpZGVyflBhcmFtc1R5cGUsTWVzc2FnZVR5cGV-IHtcbiAgICA8PGFic3RyYWN0Pj5cbiAgICAjZW1iZWQ_OiBIVE1MVm1FbWJlZEVsZW1lbnRcbiAgICAjZW1iZWRTcmM_OiBzdHJpbmdcblxuICAgIGdldE1lZGlhVGl0bGUoKSogc3RyaW5nfHVuZGVmaW5lZFxuICAgIGdldE9yaWdpbigpKiBzdHJpbmdcbiAgICBidWlsZFBhcmFtcygpKiBQYXJhbXNUeXBlXG4gICAgZ2V0RGVjb2RlcigpKiBEZWNvZGVyXG4gICAgZ2V0UHJlY29ubmVjdGlvbnMoKSpcbiAgICBvbkVtYmVkTG9hZGVkKCkqXG4gICAgb25FbWJlZE1lc3NhZ2UoQ3VzdG9tRXZlbnR-TWVzc2FnZVR5cGV-IGV2ZW50KSpcbiAgICBvbkVtYmVkU3JjQ2hhbmdlKCkqXG59XG5cbkVtYmVkZWRNZWRpYVByb3ZpZGVyIDx8LS0gWW91VHViZTogZXh0ZW5kc1xuRW1iZWRlZE1lZGlhUHJvdmlkZXIgPHwtLSBWaW1lbzogZXh0ZW5kc1xuRW1iZWRlZE1lZGlhUHJvdmlkZXIgPHwtLSBEYWlseW1vdGlvbjogZXh0ZW5kc1xuXG5jbGFzcyBWaWRlb1xuY2xhc3MgQXVkaW9cbmNsYXNzIEZpbGVcbmNsYXNzIEhMU1xuY2xhc3MgREFTSFxuXG5jbGFzcyBNZWRpYUZpbGVQcm92aWRlciB7XG4gICAgI21lZGlhRWw_OiBIVE1MTWVkaWFFbGVtZW50XG4gICAgK2Nyb3NzT3JpZ2luPzogdHJ1ZSB8IGFub255bW91cyB8IGNyZWRlbnRpYWxzXG4gICAgK3ByZWxvYWQ_OiB0cnVlIHwgbm9uZSB8IG1ldGFkYXRhIHwgYXV0b1xuICAgICtwb3N0ZXI_OiBzdHJpbmdcbiAgICArY29udHJvbHNMaXN0Pzogc3RyaW5nXG4gICAgK2F1dG9QaVA_OiBzdHJpbmdcbiAgICArZGlzYWJsZVBpUD86IGJvb2xlYW5cbiAgICArZGlzYWJsZVJlbW90ZVBsYXliYWNrPzogYm9vbGVhblxufVxuXG5GaWxlIDx8LS0gQXVkaW86IGV4dGVuZHNcbkZpbGUgPHwtLSBWaWRlbzogZXh0ZW5kc1xuTWVkaWFGaWxlUHJvdmlkZXIgPHwtLSBGaWxlOiBleHRlbmRzXG5NZWRpYUZpbGVQcm92aWRlciA8fC0tIEhMUzogZXh0ZW5kc1xuTWVkaWFGaWxlUHJvdmlkZXIgPHwtLSBEQVNIOiBleHRlbmRzXG5cbmNsYXNzIE1lZGlhUHJvdmlkZXJ-SW50ZXJuYWxQbGF5ZXJUeXBlfiB7XG4gICAgPDxhYnN0cmFjdD4-XG4gICAgI2NvbnRyb2xzOiBib29sZWFuXG4gICAgI2xhbmd1YWdlOiBzdHJpbmdcbiAgICAjcGxheXNpbmxpbmU6Ym9vbGVhblxuXG4gICAgcGxheSgpKiBQcm9taXNlfnZvaWR-XG4gICAgcGF1c2UoKSogUHJvbWlzZX52b2lkflxuICAgIGNhblBsYXkodHlwZTogc3RyaW5nKSogdm9pZFxuICAgIGxvYWRNZWRpYShzcmM6IFNvdXJjZVtdKSogdm9pZFxuICAgIGdldEludGVybmFsUGxheWVyKCkqIEludGVybmFsUGxheWVyVHlwZVxuICAgIGdldEN1cnJlbnRWaWV3VHlwZSgpKiBWaWV3VHlwZVxuICAgIGdldEN1cnJlbnRNZWRpYVR5cGUoKSogTWVkaWFUeXBlXG4gICAgc2V0Q3VycmVudFRpbWUodGltZTogbnVtYmVyKSogdm9pZFxuICAgIHNldE11dGVkKG11dGVkOiBib29sZWFuKSogdm9pZFxuICAgIHNldFZvbHVtZSh2b2x1bWU6IG51bWJlcikqIHZvaWRcbiAgICBjYW5TZXRQbGF5YmFja1JhdGUoKSogYm9vbGVhblxuICAgIHNldFBsYXliYWNrUmF0ZShyYXRlOiBudW1iZXIpKiB2b2lkXG4gICAgY2FuU2V0UGxheWJhY2tRdWFsaXR5KCkqIGJvb2xlYW5cbiAgICBzZXRQbGF5YmFja1F1YWxpdHkocXVhbGl0eTogc3RyaW5nKSogdm9pZFxuICAgIGNhblNldEZ1bGxzY3JlZW4oKSogYm9vbGVhblxuICAgIGVudGVyRnVsbHNjcmVlbihvcHRpb25zPzogRnVsbHNjcmVlbk9wdGlvbnMpKiBQcm9taXNlfnZvaWR-XG4gICAgZXhpdEZ1bGxzY3JlZW4oKSogUHJvbWlzZX52b2lkflxuICAgIGNhblNldFBpUCgpKiBib29sZWFuXG4gICAgZW50ZXJQaVAoKSogUHJvbWlzZX52b2lkflxuICAgIGV4aXRQaVAoKSogUHJvbWlzZX52b2lkflxuICAgIHNldEN1cnJlbnRUZXh0VHJhY2sodHJhY2tJZDogbnVtYmVyKSogdm9pZFxuICAgIHNldFRleHRUcmFja1Zpc2liaWxpdHkoaXNWaXNpYmxlOiBib29sZWFuKSogdm9pZFxuICAgIGdldE1lZGlhVHJpbW1pbmcoKSogTWVkaWFUcmltfHVuZGVmaW5lZFxuICAgIGZldGNoUmVjb21tZW5kZWRBc3BlY3RSYXRpbygpKiBQcm9taXNlfnN0cmluZ35cbiAgICBmZXRjaEN1cnJlbnRQb3N0ZXIoKSogUHJvbWlzZX5zdHJpbmd-XG4gICAgZmV0Y2hDdXJyZW50TWVkaWFUaXRsZSgpKiBQcm9taXNlfnN0cmluZ35cbiAgICBmZXRjaEN1cnJlbnRNZWRpYUR1cmF0aW9uKCkqIFByb21pc2V-bnVtYmVyflxuICAgIHJlbmRlclBsYXllcigpKiBIVE1MVGVtcGxhdGVTdHJpbmdcbiAgICBkZXN0cm95KCkqIHZvaWRcbiAgICAtcmVuZGVyKCkgdm9pZFxufVxuXG5NZWRpYVByb3ZpZGVyIDx8LS0gTWVkaWFGaWxlUHJvdmlkZXJcbk1lZGlhUHJvdmlkZXIgPHwtLSBFbWJlZGVkTWVkaWFQcm92aWRlclxuXG5jbGFzcyBNZWRpYVR5cGUge1xuICAgIDw8ZW51bWVyYXRpb24-PlxuICAgIEFVRElPXG4gICAgVklERU9cbn1cblxuY2xhc3MgVmlld1R5cGUge1xuICAgIDw8ZW51bWVyYXRpb24-PlxuICAgIEFVRElPXG4gICAgVklERU9cbn1cblxuTWVkaWFUeXBlIC0tIE1lZGlhUHJvdmlkZXJcblZpZXdUeXBlIC0tIE1lZGlhUHJvdmlkZXJcblxuY2xhc3MgUGxheWVyXG5cblBsYXllciAtLSBNZWRpYVR5cGVcblBsYXllciAtLSBWaWV3VHlwZVxuUGxheWVyIFwiMVwiIC0tKiBcIjAuLipcIiBNZWRpYVByb3ZpZGVyOiBjb21wb3NpdGlvbiIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFlvdVR1YmVcbmNsYXNzIFZpbWVvXG5jbGFzcyBEYWlseW1vdGlvblxuY2xhc3MgRW1iZWRcblxuWW91VHViZSAtLSBFbWJlZDogdXNlc1xuVmltZW8gLS0gRW1iZWQ6IHVzZXNcbkRhaWx5bW90aW9uIC0tIEVtYmVkOiB1c2VzXG5cbmNsYXNzIEVtYmVkZWRNZWRpYVByb3ZpZGVyflBhcmFtc1R5cGUsTWVzc2FnZVR5cGV-IHtcbiAgICA8PGFic3RyYWN0Pj5cbiAgICAjZW1iZWQ_OiBIVE1MVm1FbWJlZEVsZW1lbnRcbiAgICAjZW1iZWRTcmM_OiBzdHJpbmdcblxuICAgIGdldE1lZGlhVGl0bGUoKSogc3RyaW5nfHVuZGVmaW5lZFxuICAgIGdldE9yaWdpbigpKiBzdHJpbmdcbiAgICBidWlsZFBhcmFtcygpKiBQYXJhbXNUeXBlXG4gICAgZ2V0RGVjb2RlcigpKiBEZWNvZGVyXG4gICAgZ2V0UHJlY29ubmVjdGlvbnMoKSpcbiAgICBvbkVtYmVkTG9hZGVkKCkqXG4gICAgb25FbWJlZE1lc3NhZ2UoQ3VzdG9tRXZlbnR-TWVzc2FnZVR5cGV-IGV2ZW50KSpcbiAgICBvbkVtYmVkU3JjQ2hhbmdlKCkqXG59XG5cbkVtYmVkZWRNZWRpYVByb3ZpZGVyIDx8LS0gWW91VHViZTogZXh0ZW5kc1xuRW1iZWRlZE1lZGlhUHJvdmlkZXIgPHwtLSBWaW1lbzogZXh0ZW5kc1xuRW1iZWRlZE1lZGlhUHJvdmlkZXIgPHwtLSBEYWlseW1vdGlvbjogZXh0ZW5kc1xuXG5jbGFzcyBWaWRlb1xuY2xhc3MgQXVkaW9cbmNsYXNzIEZpbGVcbmNsYXNzIEhMU1xuY2xhc3MgREFTSFxuXG5jbGFzcyBNZWRpYUZpbGVQcm92aWRlciB7XG4gICAgI21lZGlhRWw_OiBIVE1MTWVkaWFFbGVtZW50XG4gICAgK2Nyb3NzT3JpZ2luPzogdHJ1ZSB8IGFub255bW91cyB8IGNyZWRlbnRpYWxzXG4gICAgK3ByZWxvYWQ_OiB0cnVlIHwgbm9uZSB8IG1ldGFkYXRhIHwgYXV0b1xuICAgICtwb3N0ZXI_OiBzdHJpbmdcbiAgICArY29udHJvbHNMaXN0Pzogc3RyaW5nXG4gICAgK2F1dG9QaVA_OiBzdHJpbmdcbiAgICArZGlzYWJsZVBpUD86IGJvb2xlYW5cbiAgICArZGlzYWJsZVJlbW90ZVBsYXliYWNrPzogYm9vbGVhblxufVxuXG5GaWxlIDx8LS0gQXVkaW86IGV4dGVuZHNcbkZpbGUgPHwtLSBWaWRlbzogZXh0ZW5kc1xuTWVkaWFGaWxlUHJvdmlkZXIgPHwtLSBGaWxlOiBleHRlbmRzXG5NZWRpYUZpbGVQcm92aWRlciA8fC0tIEhMUzogZXh0ZW5kc1xuTWVkaWFGaWxlUHJvdmlkZXIgPHwtLSBEQVNIOiBleHRlbmRzXG5cbmNsYXNzIE1lZGlhUHJvdmlkZXJ-SW50ZXJuYWxQbGF5ZXJUeXBlfiB7XG4gICAgPDxhYnN0cmFjdD4-XG4gICAgI2NvbnRyb2xzOiBib29sZWFuXG4gICAgI2xhbmd1YWdlOiBzdHJpbmdcbiAgICAjcGxheXNpbmxpbmU6Ym9vbGVhblxuXG4gICAgcGxheSgpKiBQcm9taXNlfnZvaWR-XG4gICAgcGF1c2UoKSogUHJvbWlzZX52b2lkflxuICAgIGNhblBsYXkodHlwZTogc3RyaW5nKSogdm9pZFxuICAgIGxvYWRNZWRpYShzcmM6IFNvdXJjZVtdKSogdm9pZFxuICAgIGdldEludGVybmFsUGxheWVyKCkqIEludGVybmFsUGxheWVyVHlwZVxuICAgIGdldEN1cnJlbnRWaWV3VHlwZSgpKiBWaWV3VHlwZVxuICAgIGdldEN1cnJlbnRNZWRpYVR5cGUoKSogTWVkaWFUeXBlXG4gICAgc2V0Q3VycmVudFRpbWUodGltZTogbnVtYmVyKSogdm9pZFxuICAgIHNldE11dGVkKG11dGVkOiBib29sZWFuKSogdm9pZFxuICAgIHNldFZvbHVtZSh2b2x1bWU6IG51bWJlcikqIHZvaWRcbiAgICBjYW5TZXRQbGF5YmFja1JhdGUoKSogYm9vbGVhblxuICAgIHNldFBsYXliYWNrUmF0ZShyYXRlOiBudW1iZXIpKiB2b2lkXG4gICAgY2FuU2V0UGxheWJhY2tRdWFsaXR5KCkqIGJvb2xlYW5cbiAgICBzZXRQbGF5YmFja1F1YWxpdHkocXVhbGl0eTogc3RyaW5nKSogdm9pZFxuICAgIGNhblNldEZ1bGxzY3JlZW4oKSogYm9vbGVhblxuICAgIGVudGVyRnVsbHNjcmVlbihvcHRpb25zPzogRnVsbHNjcmVlbk9wdGlvbnMpKiBQcm9taXNlfnZvaWR-XG4gICAgZXhpdEZ1bGxzY3JlZW4oKSogUHJvbWlzZX52b2lkflxuICAgIGNhblNldFBpUCgpKiBib29sZWFuXG4gICAgZW50ZXJQaVAoKSogUHJvbWlzZX52b2lkflxuICAgIGV4aXRQaVAoKSogUHJvbWlzZX52b2lkflxuICAgIHNldEN1cnJlbnRUZXh0VHJhY2sodHJhY2tJZDogbnVtYmVyKSogdm9pZFxuICAgIHNldFRleHRUcmFja1Zpc2liaWxpdHkoaXNWaXNpYmxlOiBib29sZWFuKSogdm9pZFxuICAgIGdldE1lZGlhVHJpbW1pbmcoKSogTWVkaWFUcmltfHVuZGVmaW5lZFxuICAgIGZldGNoUmVjb21tZW5kZWRBc3BlY3RSYXRpbygpKiBQcm9taXNlfnN0cmluZ35cbiAgICBmZXRjaEN1cnJlbnRQb3N0ZXIoKSogUHJvbWlzZX5zdHJpbmd-XG4gICAgZmV0Y2hDdXJyZW50TWVkaWFUaXRsZSgpKiBQcm9taXNlfnN0cmluZ35cbiAgICBmZXRjaEN1cnJlbnRNZWRpYUR1cmF0aW9uKCkqIFByb21pc2V-bnVtYmVyflxuICAgIHJlbmRlclBsYXllcigpKiBIVE1MVGVtcGxhdGVTdHJpbmdcbiAgICBkZXN0cm95KCkqIHZvaWRcbiAgICAtcmVuZGVyKCkgdm9pZFxufVxuXG5NZWRpYVByb3ZpZGVyIDx8LS0gTWVkaWFGaWxlUHJvdmlkZXJcbk1lZGlhUHJvdmlkZXIgPHwtLSBFbWJlZGVkTWVkaWFQcm92aWRlclxuXG5jbGFzcyBNZWRpYVR5cGUge1xuICAgIDw8ZW51bWVyYXRpb24-PlxuICAgIEFVRElPXG4gICAgVklERU9cbn1cblxuY2xhc3MgVmlld1R5cGUge1xuICAgIDw8ZW51bWVyYXRpb24-PlxuICAgIEFVRElPXG4gICAgVklERU9cbn1cblxuTWVkaWFUeXBlIC0tIE1lZGlhUHJvdmlkZXJcblZpZXdUeXBlIC0tIE1lZGlhUHJvdmlkZXJcblxuY2xhc3MgUGxheWVyXG5cblBsYXllciAtLSBNZWRpYVR5cGVcblBsYXllciAtLSBWaWV3VHlwZVxuUGxheWVyIFwiMVwiIC0tKiBcIjAuLipcIiBNZWRpYVByb3ZpZGVyOiBjb21wb3NpdGlvbiIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

## Boot Strategy

**Default Strategy:** `LazyBootStrategy`

A boot [strategy](https://en.wikipedia.org/wiki/Strategy_pattern) controls when/how a player
is loaded the first time. The player implements the `Bootable` interface and registers
to the current boot strategy. The strategy will call the `boot()` method when it is ready to
load the player. The player will render whatever the `renderWhileBooting()` method returns
if it's available, otherwise it'll default to `<slot name="booting" />`.

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllciB7XG4gICAgLi4uXG4gICAgK2Jvb3RTdHJhdGVneTogY2xpY2sgfCBsYXp5IHwgaW1tZWRpYXRlIHwgQm9vdFN0cmF0ZWd5XG59XG5cbmNsYXNzIEJvb3RhYmxlIHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgYm9vdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgICBib290KCkgUHJvbWlzZX52b2lkflxufVxuXG5QbGF5ZXIgLS0-IEJvb3RhYmxlOiBpbXBsZW1lbnRzXG5cbmNsYXNzIEJvb3RTdHJhdGVneX5UIGV4dGVuZHMgQm9vdGFibGV-IHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgaGFzQm9vdGVkOiBib29sZWFuXG4gICAgcmVnaXN0ZXIoYm9vdGFibGU6IEJvb3RhYmxlKSBQcm9taXNlfnZvaWR-XG4gICAgcmVuZGVyV2hpbGVCb290aW5nKCkgVGVtcGxhdGVSZXN1bHRcbn1cblxuY2xhc3MgTGF6eUJvb3RTdHJhdGVneVxuY2xhc3MgQ2xpY2tCb290U3RyYXRlZ3lcbmNsYXNzIEltbWVkaWF0ZUJvb3RTdHJhdGVneVxuXG5Cb290U3RyYXRlZ3kgPC0tIExhenlCb290U3RyYXRlZ3k6IGltcGxlbWVudHNcbkJvb3RTdHJhdGVneSA8LS0gQ2xpY2tCb290U3RyYXRlZ3k6IGltcGxlbWVudHNcbkJvb3RTdHJhdGVneSA8LS0gSW1tZWRpYXRlQm9vdFN0cmF0ZWd5OiBpbXBsZW1lbnRzXG5Cb290U3RyYXRlZ3kgLS0-IEJvb3RhYmxlXG5cblBsYXllciAtLSBCb290U3RyYXRlZ3k6IHVzZSIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllciB7XG4gICAgLi4uXG4gICAgK2Jvb3RTdHJhdGVneTogY2xpY2sgfCBsYXp5IHwgaW1tZWRpYXRlIHwgQm9vdFN0cmF0ZWd5XG59XG5cbmNsYXNzIEJvb3RhYmxlIHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgYm9vdFRhcmdldDogSFRNTEVsZW1lbnRcbiAgICBib290KCkgUHJvbWlzZX52b2lkflxufVxuXG5QbGF5ZXIgLS0-IEJvb3RhYmxlOiBpbXBsZW1lbnRzXG5cbmNsYXNzIEJvb3RTdHJhdGVneX5UIGV4dGVuZHMgQm9vdGFibGV-IHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgaGFzQm9vdGVkOiBib29sZWFuXG4gICAgcmVnaXN0ZXIoYm9vdGFibGU6IEJvb3RhYmxlKSBQcm9taXNlfnZvaWR-XG4gICAgcmVuZGVyV2hpbGVCb290aW5nKCkgVGVtcGxhdGVSZXN1bHRcbn1cblxuY2xhc3MgTGF6eUJvb3RTdHJhdGVneVxuY2xhc3MgQ2xpY2tCb290U3RyYXRlZ3lcbmNsYXNzIEltbWVkaWF0ZUJvb3RTdHJhdGVneVxuXG5Cb290U3RyYXRlZ3kgPC0tIExhenlCb290U3RyYXRlZ3k6IGltcGxlbWVudHNcbkJvb3RTdHJhdGVneSA8LS0gQ2xpY2tCb290U3RyYXRlZ3k6IGltcGxlbWVudHNcbkJvb3RTdHJhdGVneSA8LS0gSW1tZWRpYXRlQm9vdFN0cmF0ZWd5OiBpbXBsZW1lbnRzXG5Cb290U3RyYXRlZ3kgLS0-IEJvb3RhYmxlXG5cblBsYXllciAtLSBCb290U3RyYXRlZ3k6IHVzZSIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

## Media Load Strategy

**Default Strategy:** `FirstCanPlayMediaLoadStrategy`

The media load [strategy](https://en.wikipedia.org/wiki/Strategy_pattern) controls which source/s
are loaded and by which loader (ie: provider). The player implements the `MediaController` interface
and registers to the current load strategy. The player will then call `onSrcChange(src)` on the 
strategy when the `src` changes. The strategy is then responsible for a) determining the 
correct loader to use and calling `setCurrentLoader` on the player, and b) calling `loadMedia(src)` 
on the loader when it's ready.

The player will render whatever the `renderWhileLoading()` method returns if it's available, 
otherwise it'll default to `<slot name="loading" />`.

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllciB7XG4gICAgLi4uXG4gICAgK21lZGlhTG9hZFN0cmF0ZWd5OiBmaXJzdENhblBsYXkgfCBNZWRpYUxvYWRTdHJhdGVneVxufVxuXG5jbGFzcyBNZWRpYUNvbnRyb2xsZXIge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICBnZXRMb2FkZXJzKCkgTWVkaWFMb2FkZXJbXVxuICAgIHNldEN1cnJlbnRMb2FkZXIobG9hZGVyOiBNZWRpYUxvYWRlcikgdm9pZFxufVxuXG5NZWRpYUNvbnRyb2xsZXItLT4gTWVkaWFMb2FkZXJcblBsYXllciAtLT4gTWVkaWFDb250cm9sbGVyOiBpbXBsZW1lbnRzXG5cbmNsYXNzIE1lZGlhTG9hZGVyIHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgSUQ6IHN0cmluZ1xuICAgIGNhblBsYXkoc3JjOiBTb3VyY2VbXSkgYm9vbGVhblxuICAgIGxvYWRNZWRpYShzcmM6IFNvdXJjZVtdKSBQcm9taXNlfnZvaWR-XG59XG5cbmNsYXNzIE1lZGlhTG9hZFN0cmF0ZWd5flQgZXh0ZW5kcyBNZWRpYUxvYWRlcn4ge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICByZWdpc3Rlcihjb250cm9sbGVyOiBNZWRpYUNvbnRyb2xsZXIpIHZvaWRcbiAgICBvblNyY0NoYW5nZShzcmM6IFNvdXJjZVtdKSBQcm9taXNlfnZvaWR-XG4gICAgcmVuZGVyV2hpbGVMb2FkaW5nKCkgVGVtcGxhdGVSZXN1bHRcbn1cblxuY2xhc3MgRmlyc3RDYW5QbGF5TWVkaWFMb2FkU3RyYXRlZ3lcblxuTWVkaWFMb2FkU3RyYXRlZ3kgPC0tIEZpcnN0Q2FuUGxheU1lZGlhTG9hZFN0cmF0ZWd5OiBpbXBsZW1lbnRzXG5cblBsYXllciAtLSBNZWRpYUxvYWRTdHJhdGVneTogdXNlXG5QbGF5ZXIgXCIxXCIgLS0qIFwiMC4uKlwiIE1lZGlhUHJvdmlkZXI6IGNvbXBvc2l0aW9uXG5cbk1lZGlhUHJvdmlkZXIgLS0-IE1lZGlhTG9hZGVyOiBpbXBsZW1lbnRzIiwibWVybWFpZCI6e30sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllciB7XG4gICAgLi4uXG4gICAgK21lZGlhTG9hZFN0cmF0ZWd5OiBmaXJzdENhblBsYXkgfCBNZWRpYUxvYWRTdHJhdGVneVxufVxuXG5jbGFzcyBNZWRpYUNvbnRyb2xsZXIge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICBnZXRMb2FkZXJzKCkgTWVkaWFMb2FkZXJbXVxuICAgIHNldEN1cnJlbnRMb2FkZXIobG9hZGVyOiBNZWRpYUxvYWRlcikgdm9pZFxufVxuXG5NZWRpYUNvbnRyb2xsZXItLT4gTWVkaWFMb2FkZXJcblBsYXllciAtLT4gTWVkaWFDb250cm9sbGVyOiBpbXBsZW1lbnRzXG5cbmNsYXNzIE1lZGlhTG9hZGVyIHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgSUQ6IHN0cmluZ1xuICAgIGNhblBsYXkoc3JjOiBTb3VyY2VbXSkgYm9vbGVhblxuICAgIGxvYWRNZWRpYShzcmM6IFNvdXJjZVtdKSBQcm9taXNlfnZvaWR-XG59XG5cbmNsYXNzIE1lZGlhTG9hZFN0cmF0ZWd5flQgZXh0ZW5kcyBNZWRpYUxvYWRlcn4ge1xuICAgIDw8aW50ZXJmYWNlPj5cbiAgICByZWdpc3Rlcihjb250cm9sbGVyOiBNZWRpYUNvbnRyb2xsZXIpIHZvaWRcbiAgICBvblNyY0NoYW5nZShzcmM6IFNvdXJjZVtdKSBQcm9taXNlfnZvaWR-XG4gICAgcmVuZGVyV2hpbGVMb2FkaW5nKCkgVGVtcGxhdGVSZXN1bHRcbn1cblxuY2xhc3MgRmlyc3RDYW5QbGF5TWVkaWFMb2FkU3RyYXRlZ3lcblxuTWVkaWFMb2FkU3RyYXRlZ3kgPC0tIEZpcnN0Q2FuUGxheU1lZGlhTG9hZFN0cmF0ZWd5OiBpbXBsZW1lbnRzXG5cblBsYXllciAtLSBNZWRpYUxvYWRTdHJhdGVneTogdXNlXG5QbGF5ZXIgXCIxXCIgLS0qIFwiMC4uKlwiIE1lZGlhUHJvdmlkZXI6IGNvbXBvc2l0aW9uXG5cbk1lZGlhUHJvdmlkZXIgLS0-IE1lZGlhTG9hZGVyOiBpbXBsZW1lbnRzIiwibWVybWFpZCI6e30sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)

## Player Sync

**WIP**

## Media Sync

**WIP**

## UI

The UI are a collection of components that are self contained and connect to the player via a
`Context`. The player is the provider who is responsible for updating the current
value, and UI components are consumers who simply listen for updates on when a value is changed.

> See the React documentation on [Context](https://reactjs.org/docs/context.html) as a primer if you
> haven't seen this pattern before.

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllclN0YXRlXG5cbmNsYXNzIFBsYXllckNvbnRleHQge1xuICAgIDw8b2JqZWN0Pj5cbiAgICBwYXVzZWQ6IENvbnRleHQ8Ym9vbGVhbj5cbiAgICBjdXJyZW50VGltZTogQ29udGV4dDxudW1iZXI-XG4gICAgdm9sdW1lOiBDb250ZXh0PG51bWJlcj5cbiAgICAuLi5cbn1cblxuY2xhc3MgQ29udGV4dFByb3ZpZGVyIHtcbiAgICA8PGxpYnJhcnk-PlxufVxuXG5QbGF5ZXJDb250ZXh0IC0tPiBDb250ZXh0UHJvdmlkZXI6IHVzZXNcblBsYXllckNvbnRleHQgLS0-IFBsYXllclN0YXRlOiBpbXBsZW1lbnRzXG5cbmNsYXNzIFBsYXllclxuXG5QbGF5ZXIgLS0-IFBsYXllckNvbnRleHQ6IHByb3ZpZGVzXG5cbmNsYXNzIFVJQ29tcG9uZW50XG5cblVJQ29tcG9uZW50IC0tPiBQbGF5ZXJDb250ZXh0OiBjb25zdW1lcyIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllclN0YXRlXG5cbmNsYXNzIFBsYXllckNvbnRleHQge1xuICAgIDw8b2JqZWN0Pj5cbiAgICBwYXVzZWQ6IENvbnRleHQ8Ym9vbGVhbj5cbiAgICBjdXJyZW50VGltZTogQ29udGV4dDxudW1iZXI-XG4gICAgdm9sdW1lOiBDb250ZXh0PG51bWJlcj5cbiAgICAuLi5cbn1cblxuY2xhc3MgQ29udGV4dFByb3ZpZGVyIHtcbiAgICA8PGxpYnJhcnk-PlxufVxuXG5QbGF5ZXJDb250ZXh0IC0tPiBDb250ZXh0UHJvdmlkZXI6IHVzZXNcblBsYXllckNvbnRleHQgLS0-IFBsYXllclN0YXRlOiBpbXBsZW1lbnRzXG5cbmNsYXNzIFBsYXllclxuXG5QbGF5ZXIgLS0-IFBsYXllckNvbnRleHQ6IHByb3ZpZGVzXG5cbmNsYXNzIFVJQ29tcG9uZW50XG5cblVJQ29tcG9uZW50IC0tPiBQbGF5ZXJDb250ZXh0OiBjb25zdW1lcyIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

```ts
import createContext, { Context } from '@wcom/context';
import { PlayerState } from './PlayerState';

export type PlayerContext = {
  [P in keyof PlayerState]: Context<PlayerState<P>>;
};

export const playerContext: PlayerContext = {
  paused: createContext(false),
  currentTime: createContext(0),
  volume: createContext(30),
  // ...
};
```

```ts
import { playerContext } from './playerContext';

class Player {
  // ...

  @playerContext.paused.provide();
  pausedCtx = playerContext.paused.defaultValue;

  // ...
}
```

```ts
import { playerContext } from './playerContext';

class UIComponent {
  // ...

  @playerContext.paused.consume();
  paused = playerContext.paused.defaultValue;

  // ...
}
```
